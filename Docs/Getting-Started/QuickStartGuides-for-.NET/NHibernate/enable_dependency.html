<html dir="ltr" xmlns:o>
	<head>
		<title>Using NHibernate </title>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
		<meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
		<link rel="stylesheet" type="text/css" href="../../MSDN.css">
	    <style type="text/css">
<!--
p.MsoNormal {
margin:0in;
margin-bottom:.0001pt;
font-size:12.0pt;
font-family:"Times New Roman";
}
-->
        </style>
	</head>
	<body id="bodyID" class="dtBODY">
		<div id="nsbanner">
			<div id="bannerrow1">
				<table class="bannerparthead" cellspacing="0">
					<tr id="hdr">
						<td class="runninghead">Alachisoft NCache 4.3</td>
						 
					</tr>
				</table>
			</div>
			<div id="TitleRow">
				<h1 class="dtH1">Step 3: Enable DBCacheDependency in NHibernate</h1>
			</div>
		</div>
		<div id="nstext">
			    <P>To enable Database Cache Dependency in nhibernate items, you need  to define  &lt;ncache&gt; configuration section in the  application's configuration file (it may be app.config or web.config file) and enable database notifications on the database. 
			    <P>To enable DBCacheDependency in NHibernate, do the following:       <br>         
			    <br><ol>
<li>Provide dbSync type in  &lt;ncache&gt; section as follows:<br>
	  <br>
 <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            &lt;</span><span style="font-size: 10pt; color: maroon; font-family: 'Courier New';
                mso-no-proof: yes">ncache</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                    mso-no-proof: yes">&gt;<o:p></o:p></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">region</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
                </span><span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
                    name</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                        mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                            mso-no-proof: yes">"<span style="color: blue">default</span>"<span style="color: blue">&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">add</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes"> </span>
        <span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
            key</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                    mso-no-proof: yes">"<span style="color: blue">cacheName</span>"<span style="color: blue">
                    </span><span style="color: red">value</span><span style="color: blue"> = </span>
                    "<span style="color: blue">mycache</span>"<span style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">add</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes"> </span>
        <span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
            key</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                    mso-no-proof: yes">"<span style="color: blue">enableCacheException </span>"<span
                        style="color: blue"> </span><span style="color: red">value</span><span style="color: blue">
                            = </span>"<span style="color: blue">false</span>"<span style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">class</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes"> </span>
        <span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
            name</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                    mso-no-proof: yes">"<span style="color: blue">nhibernator.BLL.Customer</span>"<span
                        style="color: blue">&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">cacheKey</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
                </span><span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
                    format</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                        mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                            mso-no-proof: yes">"<span style="color: blue">[pk]:Customer:CustomerID</span>"<span
                                style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">sqlDependency</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
                </span><span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
                    sql</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                        mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                            mso-no-proof: yes">"<span style="color: blue">select ContactName from dbo.Customers
                                where CustomerID =?</span>"<span style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;/</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">class</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes">&gt;<o:p></o:p></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; </span>&lt;/</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">region</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">&gt;<o:p></o:p></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <o:p>&nbsp;</o:p>
        </span>
    </p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">region</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
                </span><span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
                    name</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                        mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                            mso-no-proof: yes">"<span style="color: blue">Order</span>"<span style="color: blue">&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">add</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes"> </span>
        <span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
            key</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                    mso-no-proof: yes">"<span style="color: blue">cacheName</span>"<span style="color: blue">
                    </span><span style="color: red">value</span><span style="color: blue"> = </span>
                    "<span style="color: blue">CC</span>"<span style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">add</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes"> </span>
        <span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
            key</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                    mso-no-proof: yes">"<span style="color: blue">enableCacheException</span>"<span style="color: blue">
                    </span><span style="color: red">value</span><span style="color: blue"> = </span>
                    "<span style="color: blue">false</span>"<span style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">class</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes"> </span>
        <span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
            name</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                    mso-no-proof: yes">"<span style="color: blue">nhibernator.BLL.Product</span>"<span
                        style="color: blue">&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">cacheKey</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
                </span><span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
                    format</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                        mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                            mso-no-proof: yes">"<span style="color: blue"> [pk]:Product:ProductID</span>"<span
                                style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; &nbsp; </span>&lt;</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">sqlDependency</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
                </span><span style="font-size: 10pt; color: red; font-family: 'Courier New'; mso-no-proof: yes">
                    sql</span><span style="font-size: 10pt; color: blue; font-family: 'Courier New';
                        mso-no-proof: yes"> = </span><span style="font-size: 10pt; font-family: 'Courier New';
                            mso-no-proof: yes">"<span style="color: blue"> select ProductName from dbo.Product where
                                ProductID =?</span>"<span style="color: blue">/&gt;<o:p></o:p></span></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; &nbsp; </span>&lt;/</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">class</span><span style="font-size: 10pt;
                    color: blue; font-family: 'Courier New'; mso-no-proof: yes">&gt;<o:p></o:p></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal; mso-layout-grid-align: none">
        <span style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">
            <span style="mso-spacerun: yes">&nbsp; </span>&lt;/</span><span style="font-size: 10pt;
                color: maroon; font-family: 'Courier New'; mso-no-proof: yes">region</span><span
                    style="font-size: 10pt; color: blue; font-family: 'Courier New'; mso-no-proof: yes">&gt;<o:p></o:p></span></p>
    <p class="MsoNormal" style="margin: 0in 0in 10pt">
        <span style="font-size: 10pt; color: blue; line-height: 115%; font-family: 'Courier New';
            mso-no-proof: yes">&lt;/</span><span style="font-size: 10pt; color: maroon; line-height: 115%;
                font-family: 'Courier New'; mso-no-proof: yes">ncache</span><span style="font-size: 10pt;
                    color: blue; line-height: 115%; font-family: 'Courier New'; mso-no-proof: yes">&gt;</span>
      <br><p>The value for dbSync type is either "sqlDependency" or "dbDependency". sqlDependency is   a mechanism for synchronizing your cache with SQL Server 2005 database through   .NET events. dbDependency allows you to synchronize your cache with any OLEDB   compliant database through a configurable polling interval. If you specify   "sqlDependency" value, then you must also specify the &lt;sqlDependency   sql=&quot;..."/&gt; tag for individual classes in &lt;class&gt; section. You specify a "select" SQL statement to identify a row in SQL Server 2005   database that corresponds to this cached item. Then, whenever that row is   updated or removed, this cached item is also removed. </li><br>
<br><li>Enable database notifications on the database except when you are using SQL Server 2005. </li>
			    </ol>
               <br><br>
                <h4 class="dth4">See Also</h4>
                <A href="configure_cache.html">Configure the   Cache</A> | <A href="register.html"> Register NCache with NHibernate</A> | <A href="run_app.html">Run your NHibernate based Application</A><BR>
          <!-- End of Document -->
          <DIV class="footer">
		      <HR>
				<P>
					<A href="mailto:support@alachisoft.com?subject=Alachisoft%20NCache%204.4%20Documentation%20Feedback:%20Using%20NHibernate">
						Send comments on this topic.</A>				</P>
				<P>
					<a>Copyright &copy; 2005-2015 Alachisoft. All rights reserved.</a>
				</P>
		  </DIV>
		  <P class="MsoBodyText2">
				<o:p></o:p>
		  </P>
	</div>
	</body>
</html>